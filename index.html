<!DOCTYPE html>
{% autoescape true %}
<html>

  <head>
    <title>Miniramp v0.1</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link href="/css/style.css" rel="stylesheet" type="text/css">
  </head>

  <body>
    
    <script>
    // TODOs
    // Redo input using semantic forms
      $(document).on('ready', function() {
        $('#loading').hide()

        $('#submitButton').click(function() {
          $('#appendLog').empty()
          $('#loading').show()

          // Display current artist to user
          var artist = $('#artistName').val();
          var textArtist= $('<div></div>').text(artist);
          var artistMarkup = '-------------------------------------------------'+
                             '<p>' + 'If you\'re a fan of ' +
                             '<strong>' + textArtist.html() + ',</strong>' +
                             '<br> you might also dig: <p>'
          $('#appendLog').append(artistMarkup)

          // Then get recommendations from server and append them to DOM
          var url = '/recommender/' + textArtist.text();
          console.log('URL: ' + url);
          $.get(url, function(data){
            console.log(data)
            for (var i = 0; i < data.length; i++) {
              var artistUrl = data[i]['url'];
              var recommendationMarkup = '<a class="artistlink" href="' + 
                                         artistUrl + '">' + 
                                         data[i]['username'] + '</a><br>';
              $('#appendLog').append(recommendationMarkup);
            }
            $('#loading').hide()
          });
        });
      });
    </script>

    <div id="intro">
      Hi!  Welcome to Miniramp (version something-very-early).
      <p>To use this, enter the <a href="http://soundcloud.com">SoundCloud</a> username of an artist you like below,
      <br>then wait about a minute for a list of recommended, similar artists.
    </div>

    <div id="input">
      Artist username: <input type="text" id="artistName">
      <button id="submitButton">Submit</button>
    </div>

    <div id="appendLog">
    </div>
    
    <div id="loading" style="color:#FF7E00">
      <p>
      <em> --- loading --- </em>
    </div>

    <div id="footer">
      <p>-------------------------------------------------
      <br>Made by oldhill using the SoundCloud <a href="http://developers.soundcloud.com/">API</a>. 
      All code is at <a href="http://github.com/oldhill/miniramp">GitHub</a>.
    </div>


  </body>
  
</html>
{% endautoescape %}